-- ‚öôÔ∏è Auto Teleport C·ªïng 2 (Safe & Optimized)
-- T·ª± ƒë·ªông d·ªãch chuy·ªÉn t·ªõi C·ªïng 2 sau 3 gi√¢y, gi·ªØ 1 gi√¢y, r·ªìi t·∫Øt
-- √Åp d·ª•ng nguy√™n t·∫Øc: kh√¥ng l√†m n·∫∑ng, c√≥ cleanup, kh√¥ng leak

local Players = game:GetService("Players")
local p = Players.LocalPlayer

-- ‚öôÔ∏è C·∫•u h√¨nh
local START_DELAY = 3       -- ch·ªù 3 gi√¢y tr∆∞·ªõc khi teleport
local HOLD_TIME = 1         -- gi·ªØ v·ªã tr√≠ trong 1 gi√¢y
local TELEPORT_POS = Vector3.new(18.3733, 0.3727, -140.7277)
local HEIGHT_OFFSET = Vector3.new(0, 5, 0)

-- ‚öôÔ∏è Tr·∫°ng th√°i qu·∫£n l√Ω
local Teleport2 = {
	active = false,
	thread = nil,
}

-- üßπ Cleanup function
function Teleport2:Stop()
	if not self.active then return end
	self.active = false

	if self.thread and coroutine.close then
		pcall(function() coroutine.close(self.thread) end)
	end
	self.thread = nil

	pcall(function() collectgarbage("collect") end)
	print("[AUTO TP2] üî¥ D·ª´ng teleport v√† d·ªçn d·∫πp.")
end

-- ‚öôÔ∏è H√†m th·ª±c thi teleport
local function StartTeleport2()
	if Teleport2.active then
		warn("[AUTO TP2] ƒêang ch·∫°y ‚Äî b·ªè qua l·∫ßn kh·ªüi ƒë·ªông tr√πng.")
		return
	end
	Teleport2.active = true

	print("[AUTO TP2] ‚è≥ S·∫Ω d·ªãch chuy·ªÉn t·ªõi C·ªïng 2 sau " .. START_DELAY .. " gi√¢y...")

	task.delay(START_DELAY, function()
		if not Teleport2.active then return end

		local chr = p.Character or p.CharacterAdded:Wait()
		local hrp = chr:FindFirstChild("HumanoidRootPart")

		if hrp then
			pcall(function()
				print("[AUTO TP2] üü¢ D·ªãch chuy·ªÉn t·ªõi C·ªïng 2...")
				hrp.Velocity = Vector3.zero
				hrp.CFrame = CFrame.new(TELEPORT_POS + HEIGHT_OFFSET)
			end)
		else
			warn("[AUTO TP2] ‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y HumanoidRootPart.")
		end

		-- Gi·ªØ trong HOLD_TIME r·ªìi cleanup
		task.wait(HOLD_TIME)
		print("[AUTO TP2] üî¥ D·ª´ng teleport sau " .. HOLD_TIME .. " gi√¢y.")
		Teleport2:Stop()
	end)
end

-- üü¢ Kh·ªüi ƒë·ªông
StartTeleport2()

-- üõë Cho ph√©p d·ª´ng th·ªß c√¥ng
getgenv().StopAutoTP2 = function()
	Teleport2:Stop()
end
